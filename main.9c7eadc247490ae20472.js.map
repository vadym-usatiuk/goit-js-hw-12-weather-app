{"version":3,"sources":["webpack:///./js/getGeoPosition.js","webpack:///./js/fetchWeather.js","webpack:///./index.js"],"names":["getGeoPosition","options","maximumAge","Math","pow","Promise","resolve","reject","navigator","geolocation","getCurrentPosition","fetchWeather","query","fetch","then","responce","json","PNotify","defaults","styling","refs","form","document","querySelector","location","temperature","humidity","wind","conditions","icon","rendering","obj","setAttribute","current","condition","text","addContent","name","temp_c","wind_kph","classList","remove","ref","content","textContent","position","coords","latitude","longitude","error","addEventListener","e","preventDefault","input","currentTarget","city","value","console"],"mappings":"6JASeA,iCARQ,WACrB,IAAMC,EAAU,CACdC,WAAgB,EAAIC,KAAKC,IAAI,GAAI,IAEnC,OAAO,IAAIC,QAAQ,SAACC,EAASC,GAC3BC,UAAUC,YAAYC,mBAAmBJ,EAASC,EAAQN,OCO/CU,EAbM,SAAAC,GAQnB,OAAOC,MANI,+EAIuCD,GAEJE,KAAK,SAAAC,GAAQ,OACzDA,EAASC,UCJbC,IAAQC,SAASC,QAAU,WAE3B,IAAMC,EAAO,CACXC,KAAMC,SAASC,cAAc,gBAC7BC,SAAUF,SAASC,cAAc,2BACjCE,YAAaH,SAASC,cAAc,uBACpCG,SAAUJ,SAASC,cAAc,2BACjCI,KAAML,SAASC,cAAc,uBAC7BK,WAAYN,SAASC,cAAc,6BACnCM,KAAMP,SAASC,cAAc,UA4B/B,SAASO,EAAUC,GACjBX,EAAKS,KAAKG,aAAa,MAAOD,EAAIE,QAAQC,UAAUC,MACpDf,EAAKS,KAAKG,aAAa,MAAvB,SAAuCD,EAAIE,QAAQC,UAAUL,MAC7DO,EAAWhB,EAAKI,SAAUO,EAAIP,SAASa,MACvCD,EAAWhB,EAAKK,YAAN,GAAsBM,EAAIE,QAAQK,QAC5CF,EAAWhB,EAAKM,SAAaK,EAAIE,QAAQP,SAA/B,MACVU,EAAWhB,EAAKO,KAASI,EAAIE,QAAQM,SAA3B,QACVH,EAAWhB,EAAKQ,WAAYG,EAAIE,QAAQC,UAAUC,MAClDb,SAASC,cAAc,YAAYiB,UAAUC,OAAO,aAGtD,SAASL,EAAWM,EAAKC,GACvBD,EAAIE,YAAcD,EArCpB3C,IACGc,KAAK,SAAA+B,GACJ,IAAMC,EAASD,EAASC,OACxB,OAAOnC,EAAgBmC,EAAOC,SAAX,IAAuBD,EAAOE,aAElDlC,KAAK,SAAAC,GAAQ,OAAIe,EAAUf,KAL9B,MAMS,WACLE,IAAQgC,MAAM,CACZd,KAAM,wEAIZf,EAAKC,KAAK6B,iBAAiB,SAE3B,SAAqBC,GACnBA,EAAEC,iBACF,IACMC,EADOF,EAAEG,cACIC,KACb3C,EAAQyC,EAAMG,MACpB7C,EAAaC,GACVE,KAAK,SAAAC,GAAQ,OAAIe,EAAUf,KAD9B,MAES,SAAAkC,GAAK,OAAIQ,QAAQR,MAAMA,KAChCI,EAAMG,MAAQ","file":"main.9c7eadc247490ae20472.js","sourcesContent":["'use strict';\nconst getGeoPosition = () => {\n  const options = {\n    maximumAge: (1, 8 * Math.pow(10, 6)),\n  };\n  return new Promise((resolve, reject) => {\n    navigator.geolocation.getCurrentPosition(resolve, reject, options);\n  });\n};\n\nexport default getGeoPosition;\n","const fetchWeather = query => {\n  const options = {\n    baseUrl: 'https://api.apixu.com/v1/current.json',\n    apiKey: '5b3041f515dc4b54b04142808191107',\n  };\n\n  const requestParams = `?key=${options.apiKey}&q=${query}`;\n\n  return fetch(options.baseUrl + requestParams).then(responce => responce.json());\n};\nexport default fetchWeather;\n","import './styles.css';\nimport PNotify from '../node_modules/pnotify/dist/es/PNotify';\nimport PNotifyStyleMaterial from 'pnotify/dist/es/PNotifyStyleMaterial.js';\nimport getGeoPosition from './js/getGeoPosition';\nimport fetchWeather from './js/fetchWeather';\nPNotify.defaults.styling = 'material';\n\nconst refs = {\n  form: document.querySelector('#search-form'),\n  location: document.querySelector('[data-field=\"location\"]'),\n  temperature: document.querySelector('[data-field=\"temp\"]'),\n  humidity: document.querySelector('[data-field=\"humidity\"]'),\n  wind: document.querySelector('[data-field=\"wind\"]'),\n  conditions: document.querySelector('[data-field=\"conditions\"]'),\n  icon: document.querySelector('.icon'),\n};\ngetGeoPosition()\n  .then(position => {\n    const coords = position.coords;\n    return fetchWeather(`${coords.latitude},${coords.longitude}`);\n  })\n  .then(responce => rendering(responce))\n  .catch(() => {\n    PNotify.error({\n      text: 'Нет прав доступа к геопозиции, используйте поиск по имени города.',\n    });\n  });\n\nrefs.form.addEventListener('submit', formHandler);\n\nfunction formHandler(e) {\n  e.preventDefault();\n  const form = e.currentTarget;\n  const input = form.city;\n  const query = input.value;\n  fetchWeather(query)\n    .then(responce => rendering(responce))\n    .catch(error => console.error(error));\n  input.value = '';\n}\n\nfunction rendering(obj) {\n  refs.icon.setAttribute('alt', obj.current.condition.text);\n  refs.icon.setAttribute('src', `https:${obj.current.condition.icon}`);\n  addContent(refs.location, obj.location.name);\n  addContent(refs.temperature, `${obj.current.temp_c}`);\n  addContent(refs.humidity, `${obj.current.humidity} %`);\n  addContent(refs.wind, `${obj.current.wind_kph} kph`);\n  addContent(refs.conditions, obj.current.condition.text);\n  document.querySelector('#weather').classList.remove('is-hidden');\n}\n\nfunction addContent(ref, content) {\n  ref.textContent = content;\n}\n"],"sourceRoot":""}